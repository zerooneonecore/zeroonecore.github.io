<!DOCTYPE html>
<html>
<head>
<style>
  body {background-color: #121212;
        color: white;}
  h1 { text-align: center; }
  #code_1 { border: 2px solid white; width: 50%; margin: auto; padding: 2px;text-align: center;}
  #code_2 { border: 2px solid red; }
  .source { border: 2px solid white; width: 50%; margin: auto; padding: 4px; text-align: center;}
 


</style>
<body>
  <h1>The boot sequence</h1><br>
  Right so, where do we find the "bootcode" for the linux kernel? I found it really difficult to locate where
  the bootcode was, and decided to look into the build system. Makefiles and config files were scattered
  everywhere, and this wasn't seeming to yield any results. What I did know is that the kernel has to interface
  in some way with the BIOS/firmware, and decided to try searching "ROM, BIOS, firmware". An install script
  within the architecture specific directory for ia64 made a reference to <strong>"vmlinuz"</strong> 
  and <strong>"System.map"</strong>, which I could not find a reference for anywhere.
  I continued to dig around and finally found the ia64 file <strong>"/kernel/head.S"</strong>, with a
  promising note, (the way I had found this was by looking at a different architecture, x86, whos file
  names were much more illuminating, and then cross referencing these to the ia64 architecture files.)<br><br>
  
  <p class="source"><i>
 * Here is where the ball gets rolling as far as the kernel is concerned.
 * When control is transferred to _start, the bootload has already
 * loaded us to the correct address.  All that's left to do here is
 * to set up the kernel's global pointer and jump to the kernel
    * entry point.</i></p><br>
  The very first line, and a very common line is <strong>GLOBAL_ENTRY(_start)</strong> or <strong>ENTRY(arg)</strong>,
  the expansion is as follows.<br><br>
  <table class="source">
  <tr>
    <th>Macro Name</th>
    <th>Macro Definition</th>
    <th>Macro Expansion</th>
  </tr>
  <tr>
    <td>GLOBAL_ENTRY(name)</td>
    <td>.global name;<br>			
	      ENTRY(name)</td>
    <td>.global name;<br>
	 .align 32;<br>			
	 .proc name;<br>				
          name:<br><br>
	  </td>
  </tr>
  <tr>
    <td>ENTRY(name)</td>
    <td>.align 32;<br>			
	       .proc name;<br>				
          name:</td>
    <td>.align 32;<br>			
	.proc name;<br>				
         name:</td>
  </tr>
	</table><br><strong>.global <i>symbol</i></strong> is what is known as an <i>assembler directive</i>, with respect to the
	assembler <strong>as</strong>, it makes the symbol <strong><i>symbol</i></strong> visible to the linker
	<strong>ld</strong>. What does this mean, visible? Well clearly we need to know something about 
	<strong>ld</strong>.
  
  </body>
  </html>
